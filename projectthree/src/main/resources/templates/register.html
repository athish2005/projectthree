<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Register | Hotel Booking</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { background: linear-gradient(135deg, #74ebd5, #ACB6E5); font-family: 'Poppins', sans-serif; display:flex; justify-content:center; align-items:center; height:100vh;}
        .register-box { background:white; padding:30px; border-radius:12px; width:90%; max-width:400px; box-shadow:0 4px 12px rgba(0,0,0,0.2);}
        h2 { text-align:center; margin-bottom:20px;}
        input,select,button { width:100%; padding:10px; margin:10px 0; border-radius:8px; border:1px solid #ccc;}
        button { background:#3498db; color:white; border:none; cursor:pointer;}
        button:hover { background:#2980b9;}
    </style>
</head>
<body>
<div class="register-box">
    <h2>Create Account</h2>
    <form th:action="@{/api/auth/register}" method="post" onsubmit="return handleRegister(event)">
        <input type="text" id="name" placeholder="Full Name" required>
        <input type="email" id="email" placeholder="Email" required>
        <input type="password" id="password" placeholder="Password" required>
        <select id="role">
            <option value="USER">User</option>
            <option value="ADMIN">Admin</option>
        </select>
        <button type="submit">Register</button>
    </form>
    <p style="text-align:center;">Already registered? <a th:href="@{/login}">Login here</a></p>
</div>

<script>
async function handleRegister(e){
 e.preventDefault();
 const user={name:document.getElementById('name').value,email:document.getElementById('email').value,password:document.getElementById('password').value,role:document.getElementById('role').value};
 const res=await fetch('/api/auth/register',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(user)});
 if(res.ok){alert("✅ Registered successfully!");window.location.href='/login';}
 else alert("❌ Registration failed.");
}
</script>
</body>
</html>
